{"version":3,"sources":["webpack:///./src/pages/index.module.scss","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/store/actionCreators.ts","webpack:///./src/components/DialogBox/index.tsx","webpack:///./src/components/SpeechBox/index.tsx","webpack:///./src/pages/index.tsx","webpack:///./node_modules/msr/MediaStreamRecorder.js","webpack:///./node_modules/classnames/index.js","webpack:///./src/components/SpeechBox/styles.module.scss","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./src/components/DialogBox/styles.module.scss"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","addDialogAction","payload","type","ADD_DIALOG","DialogBox","message","useState","React","useEffect","useRef","isExpanded","setExpanded","ref","height","current","scrollHeight","className","cx","styles","container","expanded","style","maxHeight","userPrompt","content","SpeechBox","dialog","map","index","dialogContainer","connect","state","dispatch","actions","bindActionCreators","withDialog","setWithDialog","recordRef","document","getElementsByClassName","stopRef","navigator","mediaDevices","getUserMedia","audio","stream","mediaRecorder","MediaStreamRecorder","audioChannels","mimeType","onclick","start","stop","ondataavailable","fn","blob","a","fetch","process","method","body","res","json","self","this","args","arguments","apply","err","undefined","e","console","test","mediaStream","timeSlice","Recorder","MediaRecorder","MediaRecorderWrapper","IsChrome","IsOpera","IsEdge","indexOf","WhammyRecorder","StereoAudioRecorder","GifRecorder","recorderType","blobs","data","push","onstop","onStartedDrawingNonBlankFrames","mergein","mergeto","t","mergeProps","clearOldRecordedFrames","log","warn","save","file","fileName","invokeSaveAsDialog","ConcatenateBlobs","concatenatedBlob","pause","resume","disableLogs","MultiStreamRecorder","audioRecorder","videoRecorder","isMediaRecorder","isMediaRecorderCompatible","prop","fireOnDataAvailableEvent","recordingInterval","audioVideoBlobs","video","onDataAvailableEventFired","that","AudioContext","browserFakeUserAgent","global","window","userAgent","createElement","captureStream","mozCaptureStream","location","protocol","href","hash","screen","width","webkitAudioContext","mozAudioContext","URL","webkitURL","webkitGetUserMedia","mozGetUserMedia","msSaveBlob","msSaveOrOpenBlob","opera","MediaStream","fileExtension","split","splitted","fileFullName","Math","round","random","hyperlink","createObjectURL","target","download","documentElement","removeChild","appendChild","evt","MouseEvent","view","bubbles","cancelable","dispatchEvent","revokeObjectURL","bytesToSize","bytes","i","parseInt","floor","pow","toPrecision","webkitMediaStream","prototype","getVideoTracks","getTracks","tracks","forEach","track","kind","toString","getAudioTracks","ObjectStore","isOpera","isChrome","chrome","InstallTrigger","appVersion","verOffset","ix","nAgt","fullVersion","parseFloat","majorVersion","substring","isNaN","__disableLogs","length","addTrack","dontFireOnDataAvailableEvent","recorderHints","canRecordMimeType","ignoreMutedMedia","firedOnDataAvailableOnce","size","getNativeBlob","Blob","onerror","name","setTimeout","requestData","callback","record","clearRecordedData","looper","active","ended","isMediaStreamActive","timeout","StereoAudioRecorderHelper","setInterval","clearTimeout","root","deviceSampleRate","AudioContextConstructor","sampleRate","scriptprocessornode","leftchannel","rightchannel","recording","recordingLength","isPCM","numChannels","mergeBuffers","channelBuffer","result","Float32Array","offset","lng","buffer","set","writeUTFBytes","string","setUint8","charCodeAt","convertoFloat32ToInt16","l","buf","Int16Array","isPaused","requestDataInvoked","internalLeftChannel","slice","internalRightChannel","internalRecordingLength","leftBuffer","interleaved","leftChannel","rightChannel","inputIndex","interleave","debug","ArrayBuffer","DataView","setUint32","setUint16","setInt16","audioInput","disconnect","context","VolumeGainNode","createGain","volume","AudioInput","createMediaStreamSource","bufferSize","createJavaScriptNode","createScriptProcessor","onaudioprocess","left","inputBuffer","getChannelData","right","destination","WhammyRecorderHelper","HTMLVideoElement","videoWidth","clientWidth","videoHeight","clientHeight","canvas","isHTMLObject","cloneNode","src","muted","play","lastTime","Date","getTime","whammy","Whammy","Video","speed","quality","drawFrames","frames","internalFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","localCanvas","context2d","getContext","resultFrames","checkUntilNotBlack","endCheckFrame","sampleColor","r","g","b","maxColorDifference","sqrt","pixTolerance","frameTolerance","doNotCheckNext","f","matchPixCount","endPixCheck","maxPixCount","image","Image","drawImage","imageData","getImageData","pix","currentColor","concat","dropBlackFrames","compile","whammyBlob","isOnStartedDrawingNonBlankFramesInvoked","isStopDrawing","duration","paused","toDataURL","frame","isBlankFrame","GIFEncoder","doneRecording","now","gifBlob","Uint8Array","gifEncoder","bin","imageWidth","imageHeight","setRepeat","setDelay","frameRate","setQuality","lastAnimationFrame","requestAnimationFrame","drawVideoFrame","time","lastFrameTime","addFrame","cancelAnimationFrame","autoplay","WhammyVideo","whammyInWebWorker","getClusterData","clusterTimecode","clusterCounter","clusterFrames","webp","block","flags","keyframe","invisible","lacing","discardable","trackNum","timecode","String","fromCharCode","join","makeSimpleBlock","id","numToBuffer","num","parts","reverse","bitsToBuffer","bits","Array","substr","getStrLength","unpadded","webm","postMessage","checkFrames","EBML","call","Float64Array","frameNumber","clusterDuration","cluster","generateEBML","ebml","len","byteLength","zeroes","ceil","sizeToString","padded","riff","VP8","RIFF","WEBP","frameStart","c","parseWebP","parseRIFF","chunks","atob","add","_function","worker","webWorker","Worker","onmessage","event","buffers","readAsArrayBuffer","tmp","Uint16Array","lastOffset","reusableByteLength","concatenateBuffers","reader","FileReader","onload","hasOwn","hasOwnProperty","classNames","classes","argType","isArray","inner","default","runtime","Op","Object","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","_invoke","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","keys","object","pop","skipTempReset","prev","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function"],"mappings":"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","file":"component---src-pages-index-tsx-2bbb67ded92fe60ae205.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"index-module--container--2IQ43\"};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { ADD_DIALOG } from \"./constants\";\nimport { IAction } from './interfaces'\n\nconst addDialogAction: (payload: object) => IAction<object> = (payload: object) => {\n    return {\n        type: ADD_DIALOG,\n        payload\n    }\n}\n\nexport default {\n    addDialogAction\n}","import * as React from 'react'\nimport cx from 'classnames'\n\nimport styles from './styles.module.scss'\n\nconst DialogBox = ({ message }) => {\n    const { useState, useEffect, useRef } = React\n    const [isExpanded, setExpanded] = useState(false)\n    const ref: any = useRef(null)\n    const height = isExpanded ? `${ref?.current?.scrollHeight}px` : '0px'\n\n\n    useEffect(() => {\n        setExpanded(true)\n    }, [])\n\n\n    return (\n        <div ref={ref} className={cx(styles.container, { [styles.expanded]: isExpanded})} style={{ maxHeight: height }}>\n            <p className={styles.userPrompt}>{message.content}</p>\n        </div>\n    )\n}\n\nexport default DialogBox","import * as React from 'react'\n\nimport DialogBox from '../DialogBox'\n\nimport styles from './styles.module.scss'\n\nconst SpeechBox: any = ({ dialog }) => {\n    return (\n        <div className={styles.container}>\n            {dialog.map((message, index) => {\n                return (\n                    <div className={styles.dialogContainer}>\n                        <DialogBox message={message} key={index} />\n                    </div>\n                )\n            })}\n        </div>\n    )\n}\n\nexport default SpeechBox","import * as React from 'react'\nimport MediaStreamRecorder from 'msr'\nimport cx from 'classnames'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\n\nimport actions from '../store/actionCreators'\nimport SpeechBox from \"../components/SpeechBox\";\n\nimport styles from './index.module.scss'\n\nconst HomePage: React.FC = ({ actions, dialog }: any): React.ReactElement => {\n  const { useEffect, useState } = React\n  const { addDialogAction } = actions\n  const [withDialog, setWithDialog] = useState(false)\n  const key = withDialog ? 'withDiaglog' : 'withoutDialog'\n\n  const recordRef: HTMLCollection = document.getElementsByClassName('record')\n  const stopRef: HTMLCollection = document.getElementsByClassName('stop')\n\n  useEffect(() => {\n    if (navigator.mediaDevices.getUserMedia && navigator.getUserMedia) {\n      const mediaConstraints = {\n        audio: true\n      }\n\n      navigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError)\n\n      function onMediaSuccess(stream) {\n        const mediaRecorder = new MediaStreamRecorder(stream)\n        mediaRecorder.audioChannels = 1\n        mediaRecorder.mimeType = 'audio/wav'\n\n        recordRef[0].onclick = function () {\n          mediaRecorder.start(10000)\n        }\n\n        stopRef[0].onclick = function () {\n          mediaRecorder.stop()\n        }\n\n        mediaRecorder.ondataavailable = async function (blob) {\n          const { content } = await fetch(`${process.env.GATSBY_API_URL}/audio`, {\n            method: \"POST\",\n            body: blob\n          }).then(res => res.json())\n\n          setWithDialog(true)\n          addDialogAction({ content })\n        }\n      }\n\n      function onMediaError(e) {\n        console.error('media error', e)\n      }\n    }\n  })\n\n  return (\n    <div className={styles.container} key={key}>\n      <SpeechBox dialog={dialog}/>\n      <div>\n        <button className={cx('record', styles.test)}>Record</button>\n        <button className={'stop'}>Stop</button>\n      </div>\n    </div>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    dialog: state.dialog\n  }\n}\n\nfunction mapDispatchToProps(dispatch: any): { actions: any } {\n  return {\n    actions: bindActionCreators(actions, dispatch)\n  }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage)\n","// Last time updated: 2016-07-03 8:51:35 AM UTC\n// links:\n// Open-Sourced: https://github.com/streamproc/MediaStreamRecorder\n// https://cdn.WebRTC-Experiment.com/MediaStreamRecorder.js\n// https://www.WebRTC-Experiment.com/MediaStreamRecorder.js\n// npm install msr\n//------------------------------------\n// Browsers Support::\n// Chrome (all versions) [ audio/video separately ]\n// Firefox ( >= 29 ) [ audio/video in single webm/mp4 container or only audio in ogg ]\n// Opera (all versions) [ same as chrome ]\n// Android (Chrome) [ only video ]\n// Android (Opera) [ only video ]\n// Android (Firefox) [ only video ]\n// Microsoft Edge (Only Audio & Gif)\n//------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n//------------------------------------\n// ______________________\n// MediaStreamRecorder.js\nfunction MediaStreamRecorder(mediaStream) {\n  if (!mediaStream) {\n    throw 'MediaStream is mandatory.';\n  } // void start(optional long timeSlice)\n  // timestamp to fire \"ondataavailable\"\n\n\n  this.start = function (timeSlice) {\n    var Recorder;\n\n    if (typeof MediaRecorder !== 'undefined') {\n      Recorder = MediaRecorderWrapper;\n    } else if (IsChrome || IsOpera || IsEdge) {\n      if (this.mimeType.indexOf('video') !== -1) {\n        Recorder = WhammyRecorder;\n      } else if (this.mimeType.indexOf('audio') !== -1) {\n        Recorder = StereoAudioRecorder;\n      }\n    } // video recorder (in GIF format)\n\n\n    if (this.mimeType === 'image/gif') {\n      Recorder = GifRecorder;\n    } // audio/wav is supported only via StereoAudioRecorder\n    // audio/pcm (int16) is supported only via StereoAudioRecorder\n\n\n    if (this.mimeType === 'audio/wav' || this.mimeType === 'audio/pcm') {\n      Recorder = StereoAudioRecorder;\n    } // allows forcing StereoAudioRecorder.js on Edge/Firefox\n\n\n    if (this.recorderType) {\n      Recorder = this.recorderType;\n    }\n\n    mediaRecorder = new Recorder(mediaStream);\n    mediaRecorder.blobs = [];\n    var self = this;\n\n    mediaRecorder.ondataavailable = function (data) {\n      mediaRecorder.blobs.push(data);\n      self.ondataavailable(data);\n    };\n\n    mediaRecorder.onstop = this.onstop;\n    mediaRecorder.onStartedDrawingNonBlankFrames = this.onStartedDrawingNonBlankFrames; // Merge all data-types except \"function\"\n\n    mediaRecorder = mergeProps(mediaRecorder, this);\n    mediaRecorder.start(timeSlice);\n  };\n\n  this.onStartedDrawingNonBlankFrames = function () {};\n\n  this.clearOldRecordedFrames = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.clearOldRecordedFrames();\n  };\n\n  this.stop = function () {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n    }\n  };\n\n  this.ondataavailable = function (blob) {\n    console.log('ondataavailable..', blob);\n  };\n\n  this.onstop = function (error) {\n    console.warn('stopped..', error);\n  };\n\n  this.save = function (file, fileName) {\n    if (!file) {\n      if (!mediaRecorder) {\n        return;\n      }\n\n      ConcatenateBlobs(mediaRecorder.blobs, mediaRecorder.blobs[0].type, function (concatenatedBlob) {\n        invokeSaveAsDialog(concatenatedBlob);\n      });\n      return;\n    }\n\n    invokeSaveAsDialog(file, fileName);\n  };\n\n  this.pause = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.pause();\n    console.log('Paused recording.', this.mimeType || mediaRecorder.mimeType);\n  };\n\n  this.resume = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.resume();\n    console.log('Resumed recording.', this.mimeType || mediaRecorder.mimeType);\n  }; // StereoAudioRecorder || WhammyRecorder || MediaRecorderWrapper || GifRecorder\n\n\n  this.recorderType = null; // video/webm or audio/webm or audio/ogg or audio/wav\n\n  this.mimeType = 'video/webm'; // logs are enabled by default\n\n  this.disableLogs = false; // Reference to \"MediaRecorder.js\"\n\n  var mediaRecorder;\n} // ______________________\n// MultiStreamRecorder.js\n\n\nfunction MultiStreamRecorder(mediaStream) {\n  if (!mediaStream) {\n    throw 'MediaStream is mandatory.';\n  }\n\n  var self = this;\n  var isMediaRecorder = isMediaRecorderCompatible();\n  this.stream = mediaStream; // void start(optional long timeSlice)\n  // timestamp to fire \"ondataavailable\"\n\n  this.start = function (timeSlice) {\n    audioRecorder = new MediaStreamRecorder(mediaStream);\n    videoRecorder = new MediaStreamRecorder(mediaStream);\n    audioRecorder.mimeType = 'audio/ogg';\n    videoRecorder.mimeType = 'video/webm';\n\n    for (var prop in this) {\n      if (typeof this[prop] !== 'function') {\n        audioRecorder[prop] = videoRecorder[prop] = this[prop];\n      }\n    }\n\n    audioRecorder.ondataavailable = function (blob) {\n      if (!audioVideoBlobs[recordingInterval]) {\n        audioVideoBlobs[recordingInterval] = {};\n      }\n\n      audioVideoBlobs[recordingInterval].audio = blob;\n\n      if (audioVideoBlobs[recordingInterval].video && !audioVideoBlobs[recordingInterval].onDataAvailableEventFired) {\n        audioVideoBlobs[recordingInterval].onDataAvailableEventFired = true;\n        fireOnDataAvailableEvent(audioVideoBlobs[recordingInterval]);\n      }\n    };\n\n    videoRecorder.ondataavailable = function (blob) {\n      if (isMediaRecorder) {\n        return self.ondataavailable({\n          video: blob,\n          audio: blob\n        });\n      }\n\n      if (!audioVideoBlobs[recordingInterval]) {\n        audioVideoBlobs[recordingInterval] = {};\n      }\n\n      audioVideoBlobs[recordingInterval].video = blob;\n\n      if (audioVideoBlobs[recordingInterval].audio && !audioVideoBlobs[recordingInterval].onDataAvailableEventFired) {\n        audioVideoBlobs[recordingInterval].onDataAvailableEventFired = true;\n        fireOnDataAvailableEvent(audioVideoBlobs[recordingInterval]);\n      }\n    };\n\n    function fireOnDataAvailableEvent(blobs) {\n      recordingInterval++;\n      self.ondataavailable(blobs);\n    }\n\n    videoRecorder.onstop = audioRecorder.onstop = function (error) {\n      self.onstop(error);\n    };\n\n    if (!isMediaRecorder) {\n      // to make sure both audio/video are synced.\n      videoRecorder.onStartedDrawingNonBlankFrames = function () {\n        videoRecorder.clearOldRecordedFrames();\n        audioRecorder.start(timeSlice);\n      };\n\n      videoRecorder.start(timeSlice);\n    } else {\n      videoRecorder.start(timeSlice);\n    }\n  };\n\n  this.stop = function () {\n    if (audioRecorder) {\n      audioRecorder.stop();\n    }\n\n    if (videoRecorder) {\n      videoRecorder.stop();\n    }\n  };\n\n  this.ondataavailable = function (blob) {\n    console.log('ondataavailable..', blob);\n  };\n\n  this.onstop = function (error) {\n    console.warn('stopped..', error);\n  };\n\n  this.pause = function () {\n    if (audioRecorder) {\n      audioRecorder.pause();\n    }\n\n    if (videoRecorder) {\n      videoRecorder.pause();\n    }\n  };\n\n  this.resume = function () {\n    if (audioRecorder) {\n      audioRecorder.resume();\n    }\n\n    if (videoRecorder) {\n      videoRecorder.resume();\n    }\n  };\n\n  var audioRecorder;\n  var videoRecorder;\n  var audioVideoBlobs = {};\n  var recordingInterval = 0;\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.MultiStreamRecorder = MultiStreamRecorder;\n} // _____________________________\n// Cross-Browser-Declarations.js\n\n\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n(function (that) {\n  if (typeof window !== 'undefined') {\n    return;\n  }\n\n  if (typeof window === 'undefined' && typeof global !== 'undefined') {\n    global.navigator = {\n      userAgent: browserFakeUserAgent,\n      getUserMedia: function getUserMedia() {}\n    };\n    /*global window:true */\n\n    that.window = global;\n  } else if (typeof window === 'undefined') {// window = this;\n  }\n\n  if (typeof document === 'undefined') {\n    /*global document:true */\n    that.document = {};\n\n    document.createElement = document.captureStream = document.mozCaptureStream = function () {\n      return {};\n    };\n  }\n\n  if (typeof location === 'undefined') {\n    /*global location:true */\n    that.location = {\n      protocol: 'file:',\n      href: '',\n      hash: ''\n    };\n  }\n\n  if (typeof screen === 'undefined') {\n    /*global screen:true */\n    that.screen = {\n      width: 0,\n      height: 0\n    };\n  }\n})(typeof global !== 'undefined' ? global : window); // WebAudio API representer\n\n\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n  if (typeof webkitAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = webkitAudioContext;\n  }\n\n  if (typeof mozAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = mozAudioContext;\n  }\n}\n\nif (typeof window === 'undefined') {\n  /*jshint -W020 */\n  window = {};\n} // WebAudio API representer\n\n\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n  if (typeof webkitAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = webkitAudioContext;\n  }\n\n  if (typeof mozAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = mozAudioContext;\n  }\n}\n/*jshint -W079 */\n\n\nvar URL = window.URL;\n\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n  /*global URL:true */\n  URL = webkitURL;\n}\n\nif (typeof navigator !== 'undefined') {\n  if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n\n  if (typeof navigator.mozGetUserMedia !== 'undefined') {\n    navigator.getUserMedia = navigator.mozGetUserMedia;\n  }\n} else {\n  navigator = {\n    getUserMedia: function getUserMedia() {},\n    userAgent: browserFakeUserAgent\n  };\n}\n\nvar IsEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\nvar IsOpera = false;\n\nif (typeof opera !== 'undefined' && navigator.userAgent && navigator.userAgent.indexOf('OPR/') !== -1) {\n  IsOpera = true;\n}\n\nvar IsChrome = !IsEdge && !IsEdge && !!navigator.webkitGetUserMedia;\nvar MediaStream = window.MediaStream;\n\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n  MediaStream = webkitMediaStream;\n}\n/*global MediaStream:true */\n\n\nif (typeof MediaStream !== 'undefined') {\n  if (!('getVideoTracks' in MediaStream.prototype)) {\n    MediaStream.prototype.getVideoTracks = function () {\n      if (!this.getTracks) {\n        return [];\n      }\n\n      var tracks = [];\n      this.getTracks.forEach(function (track) {\n        if (track.kind.toString().indexOf('video') !== -1) {\n          tracks.push(track);\n        }\n      });\n      return tracks;\n    };\n\n    MediaStream.prototype.getAudioTracks = function () {\n      if (!this.getTracks) {\n        return [];\n      }\n\n      var tracks = [];\n      this.getTracks.forEach(function (track) {\n        if (track.kind.toString().indexOf('audio') !== -1) {\n          tracks.push(track);\n        }\n      });\n      return tracks;\n    };\n  }\n\n  if (!('stop' in MediaStream.prototype)) {\n    MediaStream.prototype.stop = function () {\n      this.getAudioTracks().forEach(function (track) {\n        if (!!track.stop) {\n          track.stop();\n        }\n      });\n      this.getVideoTracks().forEach(function (track) {\n        if (!!track.stop) {\n          track.stop();\n        }\n      });\n    };\n  }\n}\n\nif (typeof location !== 'undefined') {\n  if (location.href.indexOf('file:') === 0) {\n    console.error('Please load this HTML file on HTTP or HTTPS.');\n  }\n} // Merge all other data-types except \"function\"\n\n\nfunction mergeProps(mergein, mergeto) {\n  for (var t in mergeto) {\n    if (typeof mergeto[t] !== 'function') {\n      mergein[t] = mergeto[t];\n    }\n  }\n\n  return mergein;\n} // \"dropFirstFrame\" has been added by Graham Roth\n// https://github.com/gsroth\n\n\nfunction dropFirstFrame(arr) {\n  arr.shift();\n  return arr;\n}\n/**\n * @param {Blob} file - File or Blob object. This parameter is required.\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\n * @example\n * invokeSaveAsDialog(blob or file, [optional] fileName);\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\n */\n\n\nfunction invokeSaveAsDialog(file, fileName) {\n  if (!file) {\n    throw 'Blob object is required.';\n  }\n\n  if (!file.type) {\n    try {\n      file.type = 'video/webm';\n    } catch (e) {}\n  }\n\n  var fileExtension = (file.type || 'video/webm').split('/')[1];\n\n  if (fileName && fileName.indexOf('.') !== -1) {\n    var splitted = fileName.split('.');\n    fileName = splitted[0];\n    fileExtension = splitted[1];\n  }\n\n  var fileFullName = (fileName || Math.round(Math.random() * 9999999999) + 888888888) + '.' + fileExtension;\n\n  if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n    return navigator.msSaveOrOpenBlob(file, fileFullName);\n  } else if (typeof navigator.msSaveBlob !== 'undefined') {\n    return navigator.msSaveBlob(file, fileFullName);\n  }\n\n  var hyperlink = document.createElement('a');\n  hyperlink.href = URL.createObjectURL(file);\n  hyperlink.target = '_blank';\n  hyperlink.download = fileFullName;\n\n  if (!!navigator.mozGetUserMedia) {\n    hyperlink.onclick = function () {\n      (document.body || document.documentElement).removeChild(hyperlink);\n    };\n\n    (document.body || document.documentElement).appendChild(hyperlink);\n  }\n\n  var evt = new MouseEvent('click', {\n    view: window,\n    bubbles: true,\n    cancelable: true\n  });\n  hyperlink.dispatchEvent(evt);\n\n  if (!navigator.mozGetUserMedia) {\n    URL.revokeObjectURL(hyperlink.href);\n  }\n}\n\nfunction bytesToSize(bytes) {\n  var k = 1000;\n  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n  return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n} // ______________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// ObjectStore.js\n\n\nvar ObjectStore = {\n  AudioContext: AudioContext\n};\n\nfunction isMediaRecorderCompatible() {\n  var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n  var isChrome = !!window.chrome && !isOpera;\n  var isFirefox = typeof window.InstallTrigger !== 'undefined';\n\n  if (isFirefox) {\n    return true;\n  }\n\n  if (!isChrome) {\n    return false;\n  }\n\n  var nVer = navigator.appVersion;\n  var nAgt = navigator.userAgent;\n  var fullVersion = '' + parseFloat(navigator.appVersion);\n  var majorVersion = parseInt(navigator.appVersion, 10);\n  var nameOffset, verOffset, ix;\n\n  if (isChrome) {\n    verOffset = nAgt.indexOf('Chrome');\n    fullVersion = nAgt.substring(verOffset + 7);\n  } // trim the fullVersion string at semicolon/space if present\n\n\n  if ((ix = fullVersion.indexOf(';')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  if ((ix = fullVersion.indexOf(' ')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  majorVersion = parseInt('' + fullVersion, 10);\n\n  if (isNaN(majorVersion)) {\n    fullVersion = '' + parseFloat(navigator.appVersion);\n    majorVersion = parseInt(navigator.appVersion, 10);\n  }\n\n  return majorVersion >= 49;\n} // ______________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// ObjectStore.js\n\n\nvar ObjectStore = {\n  AudioContext: window.AudioContext || window.webkitAudioContext\n}; // ==================\n// MediaRecorder.js\n\n/**\n * Implementation of https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/MediaRecorder.html\n * The MediaRecorder accepts a mediaStream as input source passed from UA. When recorder starts,\n * a MediaEncoder will be created and accept the mediaStream as input source.\n * Encoder will get the raw data by track data changes, encode it by selected MIME Type, then store the encoded in EncodedBufferCache object.\n * The encoded data will be extracted on every timeslice passed from Start function call or by RequestData function.\n * Thread model:\n * When the recorder starts, it creates a \"Media Encoder\" thread to read data from MediaEncoder object and store buffer in EncodedBufferCache object.\n * Also extract the encoded data and create blobs on every timeslice passed from start function or RequestData function called by UA.\n */\n\nfunction MediaRecorderWrapper(mediaStream) {\n  var self = this;\n  /**\n   * This method records MediaStream.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.record();\n   */\n\n  this.start = function (timeSlice, __disableLogs) {\n    if (!self.mimeType) {\n      self.mimeType = 'video/webm';\n    }\n\n    if (self.mimeType.indexOf('audio') !== -1) {\n      if (mediaStream.getVideoTracks().length && mediaStream.getAudioTracks().length) {\n        var stream;\n\n        if (!!navigator.mozGetUserMedia) {\n          stream = new MediaStream();\n          stream.addTrack(mediaStream.getAudioTracks()[0]);\n        } else {\n          // webkitMediaStream\n          stream = new MediaStream(mediaStream.getAudioTracks());\n        }\n\n        mediaStream = stream;\n      }\n    }\n\n    if (self.mimeType.indexOf('audio') !== -1) {\n      self.mimeType = IsChrome ? 'audio/webm' : 'audio/ogg';\n    }\n\n    self.dontFireOnDataAvailableEvent = false;\n    var recorderHints = {\n      mimeType: self.mimeType\n    };\n\n    if (!self.disableLogs && !__disableLogs) {\n      console.log('Passing following params over MediaRecorder API.', recorderHints);\n    }\n\n    if (mediaRecorder) {\n      // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\n      mediaRecorder = null;\n    }\n\n    if (IsChrome && !isMediaRecorderCompatible()) {\n      // to support video-only recording on stable\n      recorderHints = 'video/vp8';\n    } // http://dxr.mozilla.org/mozilla-central/source/content/media/MediaRecorder.cpp\n    // https://wiki.mozilla.org/Gecko:MediaRecorder\n    // https://dvcs.w3.org/hg/dap/raw-file/default/media-stream-capture/MediaRecorder.html\n    // starting a recording session; which will initiate \"Reading Thread\"\n    // \"Reading Thread\" are used to prevent main-thread blocking scenarios\n\n\n    try {\n      mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\n    } catch (e) {\n      // if someone passed NON_supported mimeType\n      // or if Firefox on Android\n      mediaRecorder = new MediaRecorder(mediaStream);\n    }\n\n    if ('canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(self.mimeType) === false) {\n      if (!self.disableLogs) {\n        console.warn('MediaRecorder API seems unable to record mimeType:', self.mimeType);\n      }\n    } // i.e. stop recording when <video> is paused by the user; and auto restart recording \n    // when video is resumed. E.g. yourStream.getVideoTracks()[0].muted = true; // it will auto-stop recording.\n\n\n    mediaRecorder.ignoreMutedMedia = self.ignoreMutedMedia || false;\n    var firedOnDataAvailableOnce = false; // Dispatching OnDataAvailable Handler\n\n    mediaRecorder.ondataavailable = function (e) {\n      if (self.dontFireOnDataAvailableEvent) {\n        return;\n      } // how to fix FF-corrupt-webm issues?\n      // should we leave this?          e.data.size < 26800\n\n\n      if (!e.data || !e.data.size || e.data.size < 26800 || firedOnDataAvailableOnce) {\n        return;\n      }\n\n      firedOnDataAvailableOnce = true;\n      var blob = self.getNativeBlob ? e.data : new Blob([e.data], {\n        type: self.mimeType || 'video/webm'\n      });\n      self.ondataavailable(blob);\n      self.dontFireOnDataAvailableEvent = true;\n\n      if (!!mediaRecorder) {\n        mediaRecorder.stop();\n        mediaRecorder = null;\n      } // record next interval\n\n\n      self.start(timeSlice, '__disableLogs');\n    };\n\n    mediaRecorder.onerror = function (error) {\n      if (!self.disableLogs) {\n        if (error.name === 'InvalidState') {\n          console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.');\n        } else if (error.name === 'OutOfMemory') {\n          console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.');\n        } else if (error.name === 'IllegalStreamModification') {\n          console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.');\n        } else if (error.name === 'OtherRecordingError') {\n          console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.');\n        } else if (error.name === 'GenericError') {\n          console.error('The UA cannot provide the codec or recording option that has been requested.', error);\n        } else {\n          console.error('MediaRecorder Error', error);\n        }\n      } // When the stream is \"ended\" set recording to 'inactive' \n      // and stop gathering data. Callers should not rely on \n      // exactness of the timeSlice value, especially \n      // if the timeSlice value is small. Callers should \n      // consider timeSlice as a minimum value\n\n\n      if (!!mediaRecorder && mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\n        mediaRecorder.stop();\n      }\n    }; // void start(optional long mTimeSlice)\n    // The interval of passing encoded data from EncodedBufferCache to onDataAvailable\n    // handler. \"mTimeSlice < 0\" means Session object does not push encoded data to\n    // onDataAvailable, instead, it passive wait the client side pull encoded data\n    // by calling requestData API.\n\n\n    try {\n      mediaRecorder.start(3.6e+6);\n    } catch (e) {\n      mediaRecorder = null;\n    }\n\n    setTimeout(function () {\n      if (!mediaRecorder) {\n        return;\n      }\n\n      if (mediaRecorder.state === 'recording') {\n        // \"stop\" method auto invokes \"requestData\"!\n        mediaRecorder.requestData(); // mediaRecorder.stop();\n      }\n    }, timeSlice); // Start recording. If timeSlice has been provided, mediaRecorder will\n    // raise a dataavailable event containing the Blob of collected data on every timeSlice milliseconds.\n    // If timeSlice isn't provided, UA should call the RequestData to obtain the Blob data, also set the mTimeSlice to zero.\n  };\n  /**\n   * This method stops recording MediaStream.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.stop(function(blob) {\n   *     video.src = URL.createObjectURL(blob);\n   * });\n   */\n\n\n  this.stop = function (callback) {\n    if (!mediaRecorder) {\n      return;\n    } // mediaRecorder.state === 'recording' means that media recorder is associated with \"session\"\n    // mediaRecorder.state === 'stopped' means that media recorder is detached from the \"session\" ... in this case; \"session\" will also be deleted.\n\n\n    if (mediaRecorder.state === 'recording') {\n      // \"stop\" method auto invokes \"requestData\"!\n      mediaRecorder.requestData();\n      setTimeout(function () {\n        self.dontFireOnDataAvailableEvent = true;\n\n        if (!!mediaRecorder && mediaRecorder.state === 'recording') {\n          mediaRecorder.stop();\n        }\n\n        mediaRecorder = null;\n      }, 2000);\n    }\n  };\n  /**\n   * This method pauses the recording process.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.pause();\n   */\n\n\n  this.pause = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (mediaRecorder.state === 'recording') {\n      mediaRecorder.pause();\n    }\n  };\n  /**\n   * The recorded blobs are passed over this event.\n   * @event\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.ondataavailable = function(data) {};\n   */\n\n\n  this.ondataavailable = function (blob) {\n    console.log('recorded-blob', blob);\n  };\n  /**\n   * This method resumes the recording process.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.resume();\n   */\n\n\n  this.resume = function () {\n    if (this.dontFireOnDataAvailableEvent) {\n      this.dontFireOnDataAvailableEvent = false;\n      var disableLogs = self.disableLogs;\n      self.disableLogs = true;\n      this.record();\n      self.disableLogs = disableLogs;\n      return;\n    }\n\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (mediaRecorder.state === 'paused') {\n      mediaRecorder.resume();\n    }\n  };\n  /**\n   * This method resets currently recorded data.\n   * @method\n   * @memberof MediaStreamRecorder\n   * @example\n   * recorder.clearRecordedData();\n   */\n\n\n  this.clearRecordedData = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    this.pause();\n    this.dontFireOnDataAvailableEvent = true;\n    this.stop();\n  }; // Reference to \"MediaRecorder\" object\n\n\n  var mediaRecorder;\n\n  function isMediaStreamActive() {\n    if ('active' in mediaStream) {\n      if (!mediaStream.active) {\n        return false;\n      }\n    } else if ('ended' in mediaStream) {\n      // old hack\n      if (mediaStream.ended) {\n        return false;\n      }\n    }\n\n    return true;\n  } // this method checks if media stream is stopped\n  // or any track is ended.\n\n\n  (function looper() {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (isMediaStreamActive() === false) {\n      self.stop();\n      return;\n    }\n\n    setTimeout(looper, 1000); // check every second\n  })();\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.MediaRecorderWrapper = MediaRecorderWrapper;\n} // ======================\n// StereoAudioRecorder.js\n\n\nfunction StereoAudioRecorder(mediaStream) {\n  // void start(optional long timeSlice)\n  // timestamp to fire \"ondataavailable\"\n  this.start = function (timeSlice) {\n    timeSlice = timeSlice || 1000;\n    mediaRecorder = new StereoAudioRecorderHelper(mediaStream, this);\n    mediaRecorder.record();\n    timeout = setInterval(function () {\n      mediaRecorder.requestData();\n    }, timeSlice);\n  };\n\n  this.stop = function () {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      clearTimeout(timeout);\n    }\n  };\n\n  this.pause = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.pause();\n  };\n\n  this.resume = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.resume();\n  };\n\n  this.ondataavailable = function () {}; // Reference to \"StereoAudioRecorder\" object\n\n\n  var mediaRecorder;\n  var timeout;\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.StereoAudioRecorder = StereoAudioRecorder;\n} // ============================\n// StereoAudioRecorderHelper.js\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\n\n\nfunction StereoAudioRecorderHelper(mediaStream, root) {\n  // variables    \n  var deviceSampleRate = 44100; // range: 22050 to 96000\n\n  if (!ObjectStore.AudioContextConstructor) {\n    ObjectStore.AudioContextConstructor = new ObjectStore.AudioContext();\n  } // check device sample rate\n\n\n  deviceSampleRate = ObjectStore.AudioContextConstructor.sampleRate;\n  var leftchannel = [];\n  var rightchannel = [];\n  var scriptprocessornode;\n  var recording = false;\n  var recordingLength = 0;\n  var volume;\n  var audioInput;\n  var sampleRate = root.sampleRate || deviceSampleRate;\n  var mimeType = root.mimeType || 'audio/wav';\n  var isPCM = mimeType.indexOf('audio/pcm') > -1;\n  var context;\n  var numChannels = root.audioChannels || 2;\n\n  this.record = function () {\n    recording = true; // reset the buffers for the new recording\n\n    leftchannel.length = rightchannel.length = 0;\n    recordingLength = 0;\n  };\n\n  this.requestData = function () {\n    if (isPaused) {\n      return;\n    }\n\n    if (recordingLength === 0) {\n      requestDataInvoked = false;\n      return;\n    }\n\n    requestDataInvoked = true; // clone stuff\n\n    var internalLeftChannel = leftchannel.slice(0);\n    var internalRightChannel = rightchannel.slice(0);\n    var internalRecordingLength = recordingLength; // reset the buffers for the new recording\n\n    leftchannel.length = rightchannel.length = [];\n    recordingLength = 0;\n    requestDataInvoked = false; // we flat the left and right channels down\n\n    var leftBuffer = mergeBuffers(internalLeftChannel, internalRecordingLength);\n    var interleaved = leftBuffer; // we interleave both channels together\n\n    if (numChannels === 2) {\n      var rightBuffer = mergeBuffers(internalRightChannel, internalRecordingLength); // bug fixed via #70,#71\n\n      interleaved = interleave(leftBuffer, rightBuffer);\n    }\n\n    if (isPCM) {\n      // our final binary blob\n      var blob = new Blob([convertoFloat32ToInt16(interleaved)], {\n        type: 'audio/pcm'\n      });\n      console.debug('audio recorded blob size:', bytesToSize(blob.size));\n      root.ondataavailable(blob);\n      return;\n    } // we create our wav file\n\n\n    var buffer = new ArrayBuffer(44 + interleaved.length * 2);\n    var view = new DataView(buffer); // RIFF chunk descriptor\n\n    writeUTFBytes(view, 0, 'RIFF'); // -8 (via #97)\n\n    view.setUint32(4, 44 + interleaved.length * 2 - 8, true);\n    writeUTFBytes(view, 8, 'WAVE'); // FMT sub-chunk\n\n    writeUTFBytes(view, 12, 'fmt ');\n    view.setUint32(16, 16, true);\n    view.setUint16(20, 1, true); // stereo (2 channels)\n\n    view.setUint16(22, numChannels, true);\n    view.setUint32(24, sampleRate, true);\n    view.setUint32(28, sampleRate * numChannels * 2, true); // numChannels * 2 (via #71)\n\n    view.setUint16(32, numChannels * 2, true);\n    view.setUint16(34, 16, true); // data sub-chunk\n\n    writeUTFBytes(view, 36, 'data');\n    view.setUint32(40, interleaved.length * 2, true); // write the PCM samples\n\n    var lng = interleaved.length;\n    var index = 44;\n    var volume = 1;\n\n    for (var i = 0; i < lng; i++) {\n      view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n      index += 2;\n    } // our final binary blob\n\n\n    var blob = new Blob([view], {\n      type: 'audio/wav'\n    });\n    console.debug('audio recorded blob size:', bytesToSize(blob.size));\n    root.ondataavailable(blob);\n  };\n\n  this.stop = function () {\n    // we stop recording\n    recording = false;\n    this.requestData();\n    audioInput.disconnect();\n  };\n\n  function interleave(leftChannel, rightChannel) {\n    var length = leftChannel.length + rightChannel.length;\n    var result = new Float32Array(length);\n    var inputIndex = 0;\n\n    for (var index = 0; index < length;) {\n      result[index++] = leftChannel[inputIndex];\n      result[index++] = rightChannel[inputIndex];\n      inputIndex++;\n    }\n\n    return result;\n  }\n\n  function mergeBuffers(channelBuffer, recordingLength) {\n    var result = new Float32Array(recordingLength);\n    var offset = 0;\n    var lng = channelBuffer.length;\n\n    for (var i = 0; i < lng; i++) {\n      var buffer = channelBuffer[i];\n      result.set(buffer, offset);\n      offset += buffer.length;\n    }\n\n    return result;\n  }\n\n  function writeUTFBytes(view, offset, string) {\n    var lng = string.length;\n\n    for (var i = 0; i < lng; i++) {\n      view.setUint8(offset + i, string.charCodeAt(i));\n    }\n  }\n\n  function convertoFloat32ToInt16(buffer) {\n    var l = buffer.length;\n    var buf = new Int16Array(l);\n\n    while (l--) {\n      buf[l] = buffer[l] * 0xFFFF; //convert to 16 bit\n    }\n\n    return buf.buffer;\n  } // creates the audio context\n\n\n  var context = ObjectStore.AudioContextConstructor; // creates a gain node\n\n  ObjectStore.VolumeGainNode = context.createGain();\n  var volume = ObjectStore.VolumeGainNode; // creates an audio node from the microphone incoming stream\n\n  ObjectStore.AudioInput = context.createMediaStreamSource(mediaStream); // creates an audio node from the microphone incoming stream\n\n  var audioInput = ObjectStore.AudioInput; // connect the stream to the gain node\n\n  audioInput.connect(volume);\n  /* From the spec: This value controls how frequently the audioprocess event is\n  dispatched and how many sample-frames need to be processed each call.\n  Lower values for buffer size will result in a lower (better) latency.\n  Higher values will be necessary to avoid audio breakup and glitches \n  Legal values are 256, 512, 1024, 2048, 4096, 8192, and 16384.*/\n\n  var bufferSize = root.bufferSize || 2048;\n\n  if (root.bufferSize === 0) {\n    bufferSize = 0;\n  }\n\n  if (context.createJavaScriptNode) {\n    scriptprocessornode = context.createJavaScriptNode(bufferSize, numChannels, numChannels);\n  } else if (context.createScriptProcessor) {\n    scriptprocessornode = context.createScriptProcessor(bufferSize, numChannels, numChannels);\n  } else {\n    throw 'WebAudio API has no support on this browser.';\n  }\n\n  bufferSize = scriptprocessornode.bufferSize;\n  console.debug('using audio buffer-size:', bufferSize);\n  var requestDataInvoked = false; // sometimes \"scriptprocessornode\" disconnects from he destination-node\n  // and there is no exception thrown in this case.\n  // and obviously no further \"ondataavailable\" events will be emitted.\n  // below global-scope variable is added to debug such unexpected but \"rare\" cases.\n\n  window.scriptprocessornode = scriptprocessornode;\n\n  if (numChannels === 1) {\n    console.debug('All right-channels are skipped.');\n  }\n\n  var isPaused = false;\n\n  this.pause = function () {\n    isPaused = true;\n  };\n\n  this.resume = function () {\n    isPaused = false;\n  }; // http://webaudio.github.io/web-audio-api/#the-scriptprocessornode-interface\n\n\n  scriptprocessornode.onaudioprocess = function (e) {\n    if (!recording || requestDataInvoked || isPaused) {\n      return;\n    }\n\n    var left = e.inputBuffer.getChannelData(0);\n    leftchannel.push(new Float32Array(left));\n\n    if (numChannels === 2) {\n      var right = e.inputBuffer.getChannelData(1);\n      rightchannel.push(new Float32Array(right));\n    }\n\n    recordingLength += bufferSize;\n  };\n\n  volume.connect(scriptprocessornode);\n  scriptprocessornode.connect(context.destination);\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.StereoAudioRecorderHelper = StereoAudioRecorderHelper;\n} // ===================\n// WhammyRecorder.js\n\n\nfunction WhammyRecorder(mediaStream) {\n  // void start(optional long timeSlice)\n  // timestamp to fire \"ondataavailable\"\n  this.start = function (timeSlice) {\n    timeSlice = timeSlice || 1000;\n    mediaRecorder = new WhammyRecorderHelper(mediaStream, this);\n\n    for (var prop in this) {\n      if (typeof this[prop] !== 'function') {\n        mediaRecorder[prop] = this[prop];\n      }\n    }\n\n    mediaRecorder.record();\n    timeout = setInterval(function () {\n      mediaRecorder.requestData();\n    }, timeSlice);\n  };\n\n  this.stop = function () {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      clearTimeout(timeout);\n    }\n  };\n\n  this.clearOldRecordedFrames = function () {\n    if (mediaRecorder) {\n      mediaRecorder.clearOldRecordedFrames();\n    }\n  };\n\n  this.pause = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.pause();\n  };\n\n  this.resume = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.resume();\n  };\n\n  this.ondataavailable = function () {}; // Reference to \"WhammyRecorder\" object\n\n\n  var mediaRecorder;\n  var timeout;\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.WhammyRecorder = WhammyRecorder;\n} // ==========================\n// WhammyRecorderHelper.js\n\n\nfunction WhammyRecorderHelper(mediaStream, root) {\n  this.record = function (timeSlice) {\n    if (!this.width) {\n      this.width = 320;\n    }\n\n    if (!this.height) {\n      this.height = 240;\n    }\n\n    if (this.video && this.video instanceof HTMLVideoElement) {\n      if (!this.width) {\n        this.width = video.videoWidth || video.clientWidth || 320;\n      }\n\n      if (!this.height) {\n        this.height = video.videoHeight || video.clientHeight || 240;\n      }\n    }\n\n    if (!this.video) {\n      this.video = {\n        width: this.width,\n        height: this.height\n      };\n    }\n\n    if (!this.canvas || !this.canvas.width || !this.canvas.height) {\n      this.canvas = {\n        width: this.width,\n        height: this.height\n      };\n    }\n\n    canvas.width = this.canvas.width;\n    canvas.height = this.canvas.height; // setting defaults\n\n    if (this.video && this.video instanceof HTMLVideoElement) {\n      this.isHTMLObject = true;\n      video = this.video.cloneNode();\n    } else {\n      video = document.createElement('video');\n      video.src = URL.createObjectURL(mediaStream);\n      video.width = this.video.width;\n      video.height = this.video.height;\n    }\n\n    video.muted = true;\n    video.play();\n    lastTime = new Date().getTime();\n    whammy = new Whammy.Video(root.speed, root.quality);\n    console.log('canvas resolutions', canvas.width, '*', canvas.height);\n    console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\n    drawFrames();\n  };\n\n  this.clearOldRecordedFrames = function () {\n    whammy.frames = [];\n  };\n\n  var requestDataInvoked = false;\n\n  this.requestData = function () {\n    if (isPaused) {\n      return;\n    }\n\n    if (!whammy.frames.length) {\n      requestDataInvoked = false;\n      return;\n    }\n\n    requestDataInvoked = true; // clone stuff\n\n    var internalFrames = whammy.frames.slice(0); // reset the frames for the new recording\n\n    whammy.frames = dropBlackFrames(internalFrames, -1);\n    whammy.compile(function (whammyBlob) {\n      root.ondataavailable(whammyBlob);\n      console.debug('video recorded blob size:', bytesToSize(whammyBlob.size));\n    });\n    whammy.frames = [];\n    requestDataInvoked = false;\n  };\n\n  var isOnStartedDrawingNonBlankFramesInvoked = false;\n\n  function drawFrames() {\n    if (isPaused) {\n      lastTime = new Date().getTime();\n      setTimeout(drawFrames, 500);\n      return;\n    }\n\n    if (isStopDrawing) {\n      return;\n    }\n\n    if (requestDataInvoked) {\n      return setTimeout(drawFrames, 100);\n    }\n\n    var duration = new Date().getTime() - lastTime;\n\n    if (!duration) {\n      return drawFrames();\n    } // via webrtc-experiment#206, by Jack i.e. @Seymourr\n\n\n    lastTime = new Date().getTime();\n\n    if (!self.isHTMLObject && video.paused) {\n      video.play(); // Android\n    }\n\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n    if (!isStopDrawing) {\n      whammy.frames.push({\n        duration: duration,\n        image: canvas.toDataURL('image/webp')\n      });\n    }\n\n    if (!isOnStartedDrawingNonBlankFramesInvoked && !isBlankFrame(whammy.frames[whammy.frames.length - 1])) {\n      isOnStartedDrawingNonBlankFramesInvoked = true;\n      root.onStartedDrawingNonBlankFrames();\n    }\n\n    setTimeout(drawFrames, 10);\n  }\n\n  var isStopDrawing = false;\n\n  this.stop = function () {\n    isStopDrawing = true;\n    this.requestData();\n  };\n\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var video;\n  var lastTime;\n  var whammy;\n  var self = this;\n\n  function isBlankFrame(frame, _pixTolerance, _frameTolerance) {\n    var localCanvas = document.createElement('canvas');\n    localCanvas.width = canvas.width;\n    localCanvas.height = canvas.height;\n    var context2d = localCanvas.getContext('2d');\n    var sampleColor = {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n    var maxColorDifference = Math.sqrt(Math.pow(255, 2) + Math.pow(255, 2) + Math.pow(255, 2));\n    var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n    var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n    var matchPixCount, endPixCheck, maxPixCount;\n    var image = new Image();\n    image.src = frame.image;\n    context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n    var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n    matchPixCount = 0;\n    endPixCheck = imageData.data.length;\n    maxPixCount = imageData.data.length / 4;\n\n    for (var pix = 0; pix < endPixCheck; pix += 4) {\n      var currentColor = {\n        r: imageData.data[pix],\n        g: imageData.data[pix + 1],\n        b: imageData.data[pix + 2]\n      };\n      var colorDifference = Math.sqrt(Math.pow(currentColor.r - sampleColor.r, 2) + Math.pow(currentColor.g - sampleColor.g, 2) + Math.pow(currentColor.b - sampleColor.b, 2)); // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n\n      if (colorDifference <= maxColorDifference * pixTolerance) {\n        matchPixCount++;\n      }\n    }\n\n    if (maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance) {\n    var localCanvas = document.createElement('canvas');\n    localCanvas.width = canvas.width;\n    localCanvas.height = canvas.height;\n    var context2d = localCanvas.getContext('2d');\n    var resultFrames = [];\n    var checkUntilNotBlack = _framesToCheck === -1;\n    var endCheckFrame = _framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length ? _framesToCheck : _frames.length;\n    var sampleColor = {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n    var maxColorDifference = Math.sqrt(Math.pow(255, 2) + Math.pow(255, 2) + Math.pow(255, 2));\n    var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n    var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n    var doNotCheckNext = false;\n\n    for (var f = 0; f < endCheckFrame; f++) {\n      var matchPixCount, endPixCheck, maxPixCount;\n\n      if (!doNotCheckNext) {\n        var image = new Image();\n        image.src = _frames[f].image;\n        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n        matchPixCount = 0;\n        endPixCheck = imageData.data.length;\n        maxPixCount = imageData.data.length / 4;\n\n        for (var pix = 0; pix < endPixCheck; pix += 4) {\n          var currentColor = {\n            r: imageData.data[pix],\n            g: imageData.data[pix + 1],\n            b: imageData.data[pix + 2]\n          };\n          var colorDifference = Math.sqrt(Math.pow(currentColor.r - sampleColor.r, 2) + Math.pow(currentColor.g - sampleColor.g, 2) + Math.pow(currentColor.b - sampleColor.b, 2)); // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n\n          if (colorDifference <= maxColorDifference * pixTolerance) {\n            matchPixCount++;\n          }\n        }\n      }\n\n      if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {// console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\n      } else {\n        // console.log('frame is passed : ' + f);\n        if (checkUntilNotBlack) {\n          doNotCheckNext = true;\n        }\n\n        resultFrames.push(_frames[f]);\n      }\n    }\n\n    resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\n\n    if (resultFrames.length <= 0) {\n      // at least one last frame should be available for next manipulation\n      // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\n      resultFrames.push(_frames[_frames.length - 1]);\n    }\n\n    return resultFrames;\n  }\n\n  var isPaused = false;\n\n  this.pause = function () {\n    isPaused = true;\n  };\n\n  this.resume = function () {\n    isPaused = false;\n  };\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.WhammyRecorderHelper = WhammyRecorderHelper;\n} // --------------\n// GifRecorder.js\n\n\nfunction GifRecorder(mediaStream) {\n  if (typeof GIFEncoder === 'undefined') {\n    throw 'Please link: https://cdn.webrtc-experiment.com/gif-recorder.js';\n  } // void start(optional long timeSlice)\n  // timestamp to fire \"ondataavailable\"\n\n\n  this.start = function (timeSlice) {\n    timeSlice = timeSlice || 1000;\n    var imageWidth = this.videoWidth || 320;\n    var imageHeight = this.videoHeight || 240;\n    canvas.width = video.width = imageWidth;\n    canvas.height = video.height = imageHeight; // external library to record as GIF images\n\n    gifEncoder = new GIFEncoder(); // void setRepeat(int iter)\n    // Sets the number of times the set of GIF frames should be played.\n    // Default is 1; 0 means play indefinitely.\n\n    gifEncoder.setRepeat(0); // void setFrameRate(Number fps)\n    // Sets frame rate in frames per second.\n    // Equivalent to setDelay(1000/fps).\n    // Using \"setDelay\" instead of \"setFrameRate\"\n\n    gifEncoder.setDelay(this.frameRate || this.speed || 200); // void setQuality(int quality)\n    // Sets quality of color quantization (conversion of images to the\n    // maximum 256 colors allowed by the GIF specification).\n    // Lower values (minimum = 1) produce better colors,\n    // but slow processing significantly. 10 is the default,\n    // and produces good color mapping at reasonable speeds.\n    // Values greater than 20 do not yield significant improvements in speed.\n\n    gifEncoder.setQuality(this.quality || 1); // Boolean start()\n    // This writes the GIF Header and returns false if it fails.\n\n    gifEncoder.start();\n    startTime = Date.now();\n\n    function drawVideoFrame(time) {\n      if (isPaused) {\n        setTimeout(drawVideoFrame, 500, time);\n        return;\n      }\n\n      lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n      if (typeof lastFrameTime === undefined) {\n        lastFrameTime = time;\n      } // ~10 fps\n\n\n      if (time - lastFrameTime < 90) {\n        return;\n      }\n\n      if (video.paused) {\n        video.play(); // Android\n      }\n\n      context.drawImage(video, 0, 0, imageWidth, imageHeight);\n      gifEncoder.addFrame(context); // console.log('Recording...' + Math.round((Date.now() - startTime) / 1000) + 's');\n      // console.log(\"fps: \", 1000 / (time - lastFrameTime));\n\n      lastFrameTime = time;\n    }\n\n    lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n    timeout = setTimeout(doneRecording, timeSlice);\n  };\n\n  function doneRecording() {\n    endTime = Date.now();\n    var gifBlob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\n      type: 'image/gif'\n    });\n    self.ondataavailable(gifBlob); // todo: find a way to clear old recorded blobs\n\n    gifEncoder.stream().bin = [];\n  }\n\n  this.stop = function () {\n    if (lastAnimationFrame) {\n      cancelAnimationFrame(lastAnimationFrame);\n      clearTimeout(timeout);\n      doneRecording();\n    }\n  };\n\n  var isPaused = false;\n\n  this.pause = function () {\n    isPaused = true;\n  };\n\n  this.resume = function () {\n    isPaused = false;\n  };\n\n  this.ondataavailable = function () {};\n\n  this.onstop = function () {}; // Reference to itself\n\n\n  var self = this;\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var video = document.createElement('video');\n  video.muted = true;\n  video.autoplay = true;\n  video.src = URL.createObjectURL(mediaStream);\n  video.play();\n  var lastAnimationFrame = null;\n  var startTime, endTime, lastFrameTime;\n  var gifEncoder;\n  var timeout;\n}\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.GifRecorder = GifRecorder;\n} // https://github.com/antimatter15/whammy/blob/master/LICENSE\n// _________\n// Whammy.js\n// todo: Firefox now supports webp for webm containers!\n// their MediaRecorder implementation works well!\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\n\n/**\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\n * @summary A real time javascript webm encoder based on a canvas hack.\n * @typedef Whammy\n * @class\n * @example\n * var recorder = new Whammy().Video(15);\n * recorder.add(context || canvas || dataURL);\n * var output = recorder.compile();\n */\n\n\nvar Whammy = function () {\n  // a more abstract-ish API\n  function WhammyVideo(duration, quality) {\n    this.frames = [];\n\n    if (!duration) {\n      duration = 1;\n    }\n\n    this.duration = 1000 / duration;\n    this.quality = quality || 0.8;\n  }\n  /**\n   * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\n   * @method\n   * @memberof Whammy\n   * @example\n   * recorder = new Whammy().Video(0.8, 100);\n   * recorder.add(canvas || context || 'image/webp');\n   * @param {string} frame - Canvas || Context || image/webp\n   * @param {number} duration - Stick a duration (in milliseconds)\n   */\n\n\n  WhammyVideo.prototype.add = function (frame, duration) {\n    if ('canvas' in frame) {\n      //CanvasRenderingContext2D\n      frame = frame.canvas;\n    }\n\n    if ('toDataURL' in frame) {\n      frame = frame.toDataURL('image/webp', this.quality);\n    }\n\n    if (!/^data:image\\/webp;base64,/ig.test(frame)) {\n      throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\n    }\n\n    this.frames.push({\n      image: frame,\n      duration: duration || this.duration\n    });\n  };\n\n  function processInWebWorker(_function) {\n    var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (e) {' + _function.name + '(e.data);}'], {\n      type: 'application/javascript'\n    }));\n    var worker = new Worker(blob);\n    URL.revokeObjectURL(blob);\n    return worker;\n  }\n\n  function whammyInWebWorker(frames) {\n    function ArrayToWebM(frames) {\n      var info = checkFrames(frames);\n\n      if (!info) {\n        return [];\n      }\n\n      var clusterMaxDuration = 30000;\n      var EBML = [{\n        'id': 0x1a45dfa3,\n        // EBML\n        'data': [{\n          'data': 1,\n          'id': 0x4286 // EBMLVersion\n\n        }, {\n          'data': 1,\n          'id': 0x42f7 // EBMLReadVersion\n\n        }, {\n          'data': 4,\n          'id': 0x42f2 // EBMLMaxIDLength\n\n        }, {\n          'data': 8,\n          'id': 0x42f3 // EBMLMaxSizeLength\n\n        }, {\n          'data': 'webm',\n          'id': 0x4282 // DocType\n\n        }, {\n          'data': 2,\n          'id': 0x4287 // DocTypeVersion\n\n        }, {\n          'data': 2,\n          'id': 0x4285 // DocTypeReadVersion\n\n        }]\n      }, {\n        'id': 0x18538067,\n        // Segment\n        'data': [{\n          'id': 0x1549a966,\n          // Info\n          'data': [{\n            'data': 1e6,\n            //do things in millisecs (num of nanosecs for duration scale)\n            'id': 0x2ad7b1 // TimecodeScale\n\n          }, {\n            'data': 'whammy',\n            'id': 0x4d80 // MuxingApp\n\n          }, {\n            'data': 'whammy',\n            'id': 0x5741 // WritingApp\n\n          }, {\n            'data': doubleToString(info.duration),\n            'id': 0x4489 // Duration\n\n          }]\n        }, {\n          'id': 0x1654ae6b,\n          // Tracks\n          'data': [{\n            'id': 0xae,\n            // TrackEntry\n            'data': [{\n              'data': 1,\n              'id': 0xd7 // TrackNumber\n\n            }, {\n              'data': 1,\n              'id': 0x73c5 // TrackUID\n\n            }, {\n              'data': 0,\n              'id': 0x9c // FlagLacing\n\n            }, {\n              'data': 'und',\n              'id': 0x22b59c // Language\n\n            }, {\n              'data': 'V_VP8',\n              'id': 0x86 // CodecID\n\n            }, {\n              'data': 'VP8',\n              'id': 0x258688 // CodecName\n\n            }, {\n              'data': 1,\n              'id': 0x83 // TrackType\n\n            }, {\n              'id': 0xe0,\n              // Video\n              'data': [{\n                'data': info.width,\n                'id': 0xb0 // PixelWidth\n\n              }, {\n                'data': info.height,\n                'id': 0xba // PixelHeight\n\n              }]\n            }]\n          }]\n        }]\n      }]; //Generate clusters (max duration)\n\n      var frameNumber = 0;\n      var clusterTimecode = 0;\n\n      while (frameNumber < frames.length) {\n        var clusterFrames = [];\n        var clusterDuration = 0;\n\n        do {\n          clusterFrames.push(frames[frameNumber]);\n          clusterDuration += frames[frameNumber].duration;\n          frameNumber++;\n        } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\n\n        var clusterCounter = 0;\n        var cluster = {\n          'id': 0x1f43b675,\n          // Cluster\n          'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\n        }; //Add cluster to segment\n\n        EBML[1].data.push(cluster);\n        clusterTimecode += clusterDuration;\n      }\n\n      return generateEBML(EBML);\n    }\n\n    function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\n      return [{\n        'data': clusterTimecode,\n        'id': 0xe7 // Timecode\n\n      }].concat(clusterFrames.map(function (webp) {\n        var block = makeSimpleBlock({\n          discardable: 0,\n          frame: webp.data.slice(4),\n          invisible: 0,\n          keyframe: 1,\n          lacing: 0,\n          trackNum: 1,\n          timecode: Math.round(clusterCounter)\n        });\n        clusterCounter += webp.duration;\n        return {\n          data: block,\n          id: 0xa3\n        };\n      }));\n    } // sums the lengths of all the frames and gets the duration\n\n\n    function checkFrames(frames) {\n      if (!frames[0]) {\n        postMessage({\n          error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\n        });\n        return;\n      }\n\n      var width = frames[0].width,\n          height = frames[0].height,\n          duration = frames[0].duration;\n\n      for (var i = 1; i < frames.length; i++) {\n        duration += frames[i].duration;\n      }\n\n      return {\n        duration: duration,\n        width: width,\n        height: height\n      };\n    }\n\n    function numToBuffer(num) {\n      var parts = [];\n\n      while (num > 0) {\n        parts.push(num & 0xff);\n        num = num >> 8;\n      }\n\n      return new Uint8Array(parts.reverse());\n    }\n\n    function strToBuffer(str) {\n      return new Uint8Array(str.split('').map(function (e) {\n        return e.charCodeAt(0);\n      }));\n    }\n\n    function bitsToBuffer(bits) {\n      var data = [];\n      var pad = bits.length % 8 ? new Array(1 + 8 - bits.length % 8).join('0') : '';\n      bits = pad + bits;\n\n      for (var i = 0; i < bits.length; i += 8) {\n        data.push(parseInt(bits.substr(i, 8), 2));\n      }\n\n      return new Uint8Array(data);\n    }\n\n    function generateEBML(json) {\n      var ebml = [];\n\n      for (var i = 0; i < json.length; i++) {\n        var data = json[i].data;\n\n        if (typeof data === 'object') {\n          data = generateEBML(data);\n        }\n\n        if (typeof data === 'number') {\n          data = bitsToBuffer(data.toString(2));\n        }\n\n        if (typeof data === 'string') {\n          data = strToBuffer(data);\n        }\n\n        var len = data.size || data.byteLength || data.length;\n        var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\n        var sizeToString = len.toString(2);\n        var padded = new Array(zeroes * 7 + 7 + 1 - sizeToString.length).join('0') + sizeToString;\n        var size = new Array(zeroes).join('0') + '1' + padded;\n        ebml.push(numToBuffer(json[i].id));\n        ebml.push(bitsToBuffer(size));\n        ebml.push(data);\n      }\n\n      return new Blob(ebml, {\n        type: 'video/webm'\n      });\n    }\n\n    function toBinStrOld(bits) {\n      var data = '';\n      var pad = bits.length % 8 ? new Array(1 + 8 - bits.length % 8).join('0') : '';\n      bits = pad + bits;\n\n      for (var i = 0; i < bits.length; i += 8) {\n        data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\n      }\n\n      return data;\n    }\n\n    function makeSimpleBlock(data) {\n      var flags = 0;\n\n      if (data.keyframe) {\n        flags |= 128;\n      }\n\n      if (data.invisible) {\n        flags |= 8;\n      }\n\n      if (data.lacing) {\n        flags |= data.lacing << 1;\n      }\n\n      if (data.discardable) {\n        flags |= 1;\n      }\n\n      if (data.trackNum > 127) {\n        throw 'TrackNumber > 127 not supported';\n      }\n\n      var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function (e) {\n        return String.fromCharCode(e);\n      }).join('') + data.frame;\n      return out;\n    }\n\n    function parseWebP(riff) {\n      var VP8 = riff.RIFF[0].WEBP[0];\n      var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\n\n      for (var i = 0, c = []; i < 4; i++) {\n        c[i] = VP8.charCodeAt(frameStart + 3 + i);\n      }\n\n      var width, height, tmp; //the code below is literally copied verbatim from the bitstream spec\n\n      tmp = c[1] << 8 | c[0];\n      width = tmp & 0x3FFF;\n      tmp = c[3] << 8 | c[2];\n      height = tmp & 0x3FFF;\n      return {\n        width: width,\n        height: height,\n        data: VP8,\n        riff: riff\n      };\n    }\n\n    function getStrLength(string, offset) {\n      return parseInt(string.substr(offset + 4, 4).split('').map(function (i) {\n        var unpadded = i.charCodeAt(0).toString(2);\n        return new Array(8 - unpadded.length + 1).join('0') + unpadded;\n      }).join(''), 2);\n    }\n\n    function parseRIFF(string) {\n      var offset = 0;\n      var chunks = {};\n\n      while (offset < string.length) {\n        var id = string.substr(offset, 4);\n        var len = getStrLength(string, offset);\n        var data = string.substr(offset + 4 + 4, len);\n        offset += 4 + 4 + len;\n        chunks[id] = chunks[id] || [];\n\n        if (id === 'RIFF' || id === 'LIST') {\n          chunks[id].push(parseRIFF(data));\n        } else {\n          chunks[id].push(data);\n        }\n      }\n\n      return chunks;\n    }\n\n    function doubleToString(num) {\n      return [].slice.call(new Uint8Array(new Float64Array([num]).buffer), 0).map(function (e) {\n        return String.fromCharCode(e);\n      }).reverse().join('');\n    }\n\n    var webm = new ArrayToWebM(frames.map(function (frame) {\n      var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\n      webp.duration = frame.duration;\n      return webp;\n    }));\n    postMessage(webm);\n  }\n  /**\n   * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\n   * @method\n   * @memberof Whammy\n   * @example\n   * recorder = new Whammy().Video(0.8, 100);\n   * recorder.compile(function(blob) {\n   *    // blob.size - blob.type\n   * });\n   */\n\n\n  WhammyVideo.prototype.compile = function (callback) {\n    var webWorker = processInWebWorker(whammyInWebWorker);\n\n    webWorker.onmessage = function (event) {\n      if (event.data.error) {\n        console.error(event.data.error);\n        return;\n      }\n\n      callback(event.data);\n    };\n\n    webWorker.postMessage(this.frames);\n  };\n\n  return {\n    /**\n     * A more abstract-ish API.\n     * @method\n     * @memberof Whammy\n     * @example\n     * recorder = new Whammy().Video(0.8, 100);\n     * @param {?number} speed - 0.8\n     * @param {?number} quality - 100\n     */\n    Video: WhammyVideo\n  };\n}();\n\nif (typeof MediaStreamRecorder !== 'undefined') {\n  MediaStreamRecorder.Whammy = Whammy;\n} // Last time updated at Nov 18, 2014, 08:32:23\n// Latest file can be found here: https://cdn.webrtc-experiment.com/ConcatenateBlobs.js\n// Muaz Khan    - www.MuazKhan.com\n// MIT License  - www.WebRTC-Experiment.com/licence\n// Source Code  - https://github.com/muaz-khan/ConcatenateBlobs\n// Demo         - https://www.WebRTC-Experiment.com/ConcatenateBlobs/\n// ___________________\n// ConcatenateBlobs.js\n// Simply pass array of blobs.\n// This javascript library will concatenate all blobs in single \"Blob\" object.\n\n\n(function () {\n  window.ConcatenateBlobs = function (blobs, type, callback) {\n    var buffers = [];\n    var index = 0;\n\n    function readAsArrayBuffer() {\n      if (!blobs[index]) {\n        return concatenateBuffers();\n      }\n\n      var reader = new FileReader();\n\n      reader.onload = function (event) {\n        buffers.push(event.target.result);\n        index++;\n        readAsArrayBuffer();\n      };\n\n      reader.readAsArrayBuffer(blobs[index]);\n    }\n\n    readAsArrayBuffer();\n\n    function concatenateBuffers() {\n      var byteLength = 0;\n      buffers.forEach(function (buffer) {\n        byteLength += buffer.byteLength;\n      });\n      var tmp = new Uint16Array(byteLength);\n      var lastOffset = 0;\n      buffers.forEach(function (buffer) {\n        // BYTES_PER_ELEMENT == 2 for Uint16Array\n        var reusableByteLength = buffer.byteLength;\n\n        if (reusableByteLength % 2 != 0) {\n          buffer = buffer.slice(0, reusableByteLength - 1);\n        }\n\n        tmp.set(new Uint16Array(buffer), lastOffset);\n        lastOffset += reusableByteLength;\n      });\n      var blob = new Blob([tmp.buffer], {\n        type: type\n      });\n      callback(blob);\n    }\n  };\n})(); // https://github.com/streamproc/MediaStreamRecorder/issues/42\n\n\nif (typeof module !== 'undefined'\n/* && !!module.exports*/\n) {\n    module.exports = MediaStreamRecorder;\n  }\n\nif (typeof define === 'function' && define.amd) {\n  define('MediaStreamRecorder', [], function () {\n    return MediaStreamRecorder;\n  });\n}","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles-module--container--3WKLl\"};","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles-module--container--2_1VN\",\"userPrompt\":\"styles-module--userPrompt--1SH_K\",\"expanded\":\"styles-module--expanded--1UQ8K\"};"],"sourceRoot":""}